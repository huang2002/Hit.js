Loop.each({mosaic:function(t,a,r,e,i){if(arguments.length<=1){var h=this.canvas;return this.mosaic(0,0,h.width,h.width,arguments[0])}("number"!=typeof i||i<=0)&&(i=10);for(var n=this.getImageData(t,a,r,e),o=n.data,f=Math.ceil(r/i),s=Math.ceil(e/i),g=0;g<f;g++)for(var u=g*i,c=0;c<s;c++){var d,v,l,m,p,M=c*i,D=0,w=0,x=0,I=0,b=0;for(d=0;d<i;d++)if(l=u+d,!(l>r))for(v=0;v<i;v++)m=M+v,m>e||(p=4*(l*r+m),D+=o[p],w+=o[p+1],x+=o[p+2],I+=o[p+3],b++);for(D=Math.round(D/b),w=Math.round(w/b),x=Math.round(x/b),I=Math.round(I/b),d=0;d<i;d++)if(l=u+d,!(l>r))for(v=0;v<i;v++)m=M+v,m>e||(p=4*(l*r+m),o[p]=D,o[p+1]=w,o[p+2]=x,o[p+3]=I)}this.putImageData(n,t,a)},getPixels:function(t,a,r,e){if(0===arguments.length){var i=this.canvas;return this.getPixels(0,0,i.width,i.height)}for(var h=this.getImageData(t,a,r,e).data,n=[],o=0;o<h.length/4;o+=4)n.push({r:h[o],g:h[o+1],b:h[o+2],a:h[o+3]});return n}},function(t,a){CanvasRenderingContext2D.prototype[a]=t});