Loop.each({mosaic:function(t,a,i,e,h){if(arguments.length<=1){var r=this.canvas;return this.mosaic(0,0,r.width,r.height,arguments[0])}("number"!=typeof h||h<=0)&&(h=10);for(var n=this.getImageData(t,a,i,e),o=n.data,f=Math.ceil(i/h),s=Math.ceil(e/h),c=0;c<f;c++)for(var l=c*h,u=0;u<s;u++){var g,v,d,m,p,M=u*h,b=0,w=0,y=0,D=0,x=0;for(g=0;g<h;g++)if(d=l+g,!(d>=i))for(v=0;v<h;v++)m=M+v,m>=e||(p=4*(m*i+d),b+=o[p],w+=o[p+1],y+=o[p+2],D+=o[p+3],x++);for(b=Math.round(b/x),w=Math.round(w/x),y=Math.round(y/x),D=Math.round(D/x),g=0;g<h;g++)if(d=l+g,!(d>=i))for(v=0;v<h;v++)m=M+v,m>=e||(p=4*(m*i+d),o[p]=b,o[p+1]=w,o[p+2]=y,o[p+3]=D)}this.putImageData(n,t,a)},getPixels:function(t,a,i,e){if(0===arguments.length){var h=this.canvas;return this.getPixels(0,0,h.width,h.height)}for(var r=this.getImageData(t,a,i,e).data,n=[],o=0;o<r.length/4;o+=4)n.push({r:r[o],g:r[o+1],b:r[o+2],a:r[o+3]});return n},clearAll:function(t){" number"!=typeof t&&(t=1);var a=this.canvas;this.clearRect(0,0,a.width*t,a.height*t)},fillAll:function(t){" number"!=typeof t&&(t=1);var a=this.canvas;this.fillRect(0,0,a.width*t,a.height*t)}},function(t,a){CanvasRenderingContext2D.prototype[a]=t});