Extension.export("LocalStore",new Constructor(function(t){this.name=t||"LocalStore",this.data=null,this.autoSave=!0,this.onerror=null,this.get()},{load:function(t){return this.name=t||"LocalStore",this.get(),this},set:function(t){return this.data=JSON.parse(JSON.stringify(t)),this.autoSave&&this.save()},get:function(){if("localStorage"in window)try{return this.data=JSON.parse(localStorage.getItem(this.name))}catch(t){return this.onerror&&this.onerror(t),null}},save:function(){if(!("localStorage"in window))return!1;try{localStorage.setItem(this.name,JSON.stringify(this.data))}catch(t){return this.onerror&&this.onerror(t),!1}return!0},clear:function(){if("localStorage"in window)try{localStorage.removeItem(this.name)}catch(t){return this.onerror&&this.onerror(t),!1}return!0}}));